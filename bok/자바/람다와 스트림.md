
## 람다식이란?

> 람다식이란 간단히 말해서 메서드를 하나의 식으로 표현한 것이다. 람다식은 함수를 간략하면서도 명확한 식으로 표현할 수 있게 해준다. 메서드를 람다식으로 표현하면 메서드의 이름과  반환값이 없어지므로, 람다식을 '익명함수' 라고도 한다.



```java
int[] arr = new int[5];
Arrays.setAll(arr, (i) -> (int)(Math.random() * 5) + 1);
```


### 람다식만들기


1. 메서드에서 이름과 반환타입 제거
2. 매개변수 선언부와 몸통{} 사이에 '->' 추가
3. 반환값이 있는 메서드의 경우, return 대신 식으로 대신할 수 있다.
4. 람다식에 선언된 매개변수 타입은 추론이 가능한 경우는 생략할 수 있는데, 대부분의 경우에 생략가능하다.
5. 만약 매개변수가 하나뿐인 경우에는 괄호를 생략할 수 있다. 단 매개변수 타입이 있으면 괄호를 생략할 수 있다.
6. 괄호 안의 문장의  return문 일 경우 괄호를 생략할 수 없다.

```java
int max(int a, int b) {
	return a > b ? a : b;
}

// 람다식으로 변경
(a, b) -> a > b ? a : b
```

### 함수형 인터페이스
람다식은 사실 메서드라기보다, 익명 클래스의 객체와 동등하다.

```java
class Main {  
    public static void main(String[] args){  
        MyFunction f = (x, y) -> x > y ? x : y;  
    }  
}  
interface MyFunction {  
    int max(int x, int y);  
    }
```

다음과 같이 f는 참조형이기에 클래스 또는 인터페이스가 가능하다. 그리고 람다식과 동등한 메서드가 정의되어 있어야 한다. 위 인터페이스에 정의된 메서드 max는 람다식과 메서드의 선언부가 일치하기 때문에 위 코드와 같이 대체가 가능하다.

하나의 메서드가 선언된 인터페이스를 정의해서 람다식을 다루는 것은 기존의 자바의 규칙들을 어기지 않으면서도 자연스럽다. 그래서 인터페이스를 통해 람다식을 다루기로 결정되었으며, 람다식을 다루기 위한 인터페이스를 '함수형 인터페이스'라고 부르기로 했다.

단, 함수형 인터페이스에는 오직 하나의 추상 메서드만 정의되어 있어야 한다는 제약이 있다. 그래야 람다식과 인터페이스의 메서드가 1:1로 연결될 수 있기 때문이다 반면에 static메서드와 default메서드의 개수에는 제약이 없다.

```java
import java.util.*;  
  
class Main {  
    public static void main(String[] args){  
  
        List<String> list = Arrays.asList("a", "b", "c", "d", "e");  
        // 기존 방식  
  
        Collections.sort(list, new Comparator<String>() {  
            @Override  
            public int compare(String o1, String o2) {  
                return o1.compareTo(o2);  
            }  
        });  
        // 함수형 인터페이스를 사용한 방식  
        Collections.sort(list, (o1, o2) -> o1.compareTo(o2));  
    }  
}
```

#### 형변환

```java
class Main {  
  
    public static void main(String[] args){  
  
        MyFunction f = (MyFunction) (() -> {});//원래 형이 달라 형변환이 필요하지만, 이와 같은 형변환은 생략가능  
        Object f2 = (MyFunction) (() -> {});    // 함수형 인터페이스로 변환했을때는 Object로 변환 가능  
        Object f3 = (() -> {});                 // 익명함수 그 자체로는 Object로 형변환되지 않는다.  
    }  
}  
  
interface MyFunction {  
    void method();  
}
```


#### 외부 변수를 참조하는 람다식